---
/**
 * Example page demonstrating Astro Content Collections
 * This shows how to import and render content from the CMS
 */
import { getEntry } from 'astro:content';
import Layout from "../layouts/Layout.astro";

// Get the home page content from the 'pages' collection
const home = await getEntry('pages', 'index');
if (!home) {
  throw new Error('Home page content not found at src/content/pages/index.md');
}
const { Content } = await home.render();
---

<Layout>
  <div class="container">
    <section class="section">
      {/* Hero section */}
      {home.data.hero?.image__image && (
        <div class="hero-image">
          <img src={home.data.hero.image__image} alt={home.data.title} />
        </div>
      )}

      <h1 class="title is-1">{home.data.hero?.title || home.data.title}</h1>
      {home.data.hero?.description__textarea && (
        <p class="subtitle is-3">{home.data.hero.description__textarea}</p>
      )}

      {/* Display metadata */}
      <div class="tags">
        {home.data.published && <span class="tag is-success">Published</span>}
      </div>

      {/* Render markdown content */}
      <div class="content">
        <Content />
      </div>

      {/* Page metadata */}
      <div class="notification is-light">
        {home.data.metaDescription && (
          <p><strong>Description:</strong> {home.data.metaDescription}</p>
        )}
      </div>
    </section>
  </div>
</Layout>

<style>
  .hero-image {
    margin-bottom: 2rem;
  }
  
  .hero-image img {
    width: 100%;
    max-height: 400px;
    object-fit: cover;
    border-radius: 8px;
  }

  .tags {
    margin: 1rem 0;
  }

  .content {
    margin: 2rem 0;
  }
</style>
