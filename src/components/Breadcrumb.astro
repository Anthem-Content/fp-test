---
interface Props {
  class?: string;
}

const { class: className = "" } = Astro.props;

const currentPath = Astro.url.pathname;
const segments = currentPath
  .split("/")
  .filter((segment) => segment) // Remove empty segments
  .map((segment) => ({
    text: segment
      .split("-")
      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
      .join(" "),
    href: "/" + segment,
  }));

// Only render if there are multiple segments
const shouldRender = segments.length > 0;
---

{
  shouldRender && (
    <nav
      class={`breadcrumb subtitle my-4 ${className}`}
      aria-label="breadcrumbs"
    >
      <ul class="ml-0">
        <li>
          <a href="/">HOME</a>
        </li>
        {segments.map((segment, index) => (
          <li class={index === segments.length - 1 ? "is-active mt-0" : ""}>
            <a
              href={segment.href}
              aria-current={index === segments.length - 1 ? "page" : undefined}
            >
              {segment.text.toUpperCase()}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  )
}

<style>
  .breadcrumb a {
    color: hsl(var(--bulma-grey-h), var(--bulma-grey-s), var(--bulma-grey-l));
  }

  .breadcrumb a:hover {
    color: var(--bulma-primary);
  }
</style>
